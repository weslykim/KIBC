                                                    ##2024. 5.3

    OPENCV 설치
    sudo apt install libopencv-dev python3-opencv
    cmake 설정
        -glob file 적용하기
    영상처리 영상인식 기본 개념 정립
    기본클래스
    Point클래스:  2차원 또는 3차원 공간의 좌표표시
    주로 이미지에서 픽셀 위치나 그래픽 객체의 좌표를 나타내는 데 사용 
    Size클래스: 너비와 높이표시
    이미지, 창(window), 또는 기타 그래픽 객체의 크기를 나타내는 데 사용
    Rect클래스 : 사각형과 관련된 함수들의 집합클래스
    이미지에서 특정 영역을 정의하거나, 객체의 경계 박스(bounding box)를 나타내는 데 사용
    Scalar클래스 : 여러 개의 값으로 구성된 스칼라(벡터)를 표시
    주로 색상 값을 나타내거나, 다차원 데이터를 저장하는 데 사용
    Mat클래스 : 이미지 데이터 또는 행렬 데이터를 나타냅니다.
    OpenCV에서 가장 기본이 되는 클래스 중 하나로, 이미지 처리 및 행렬 연산을 위한 데이터 구조를 제공
    Vec클래스 : 고정 크기 벡터표시
    다양한 요소를 포함하는 다차원 데이터를 나타내는 데 사용
    영상 입출력 함수
    imread : 파일 시스템에서 이미지 파일을 읽어 OpenCV의 행렬(cv::Mat) 형식으로 호출
    imshow : 주어진 cv::Mat 이미지를 새로운 창(window)에 표시
    주의점 : cv::waitKey()를 호출하여 창을 유지하거나, 입력을 대기 필수
    imwrite : cv::Mat 이미지를 파일 시스템에 저장
    동영상 입출력
    VideoCapture : 비디오 파일이나 카메라 등의 비디오 소스에서 프레임을 읽어오는 역할을 합니다.
    VideoWriter : 프레임을 비디오 파일로 기록하거나 작성하는 역할을 합니다.
    직선 그리기
    line함수 : 이미지 또는 행렬에 직선을 그리는 역할을 합니다. 이 함수는 지정된 두 점 사이를 연결하여 직선을 그립니다.
    img: 직선을 그릴 대상 이미지 또는 행렬.
    pt1: 직선의 시작점(좌표).
    pt2: 직선의 끝점(좌표).
    color: 직선의 색상. cv::Scalar로 지정하며, RGB 또는 흑백 값으로 나타냅니다.
    thickness: 직선의 두께. 기본값은 1입니다.
    lineType: 직선의 선형(line type). 보통 cv::LINE_8, cv::LINE_AA(안티앨리어싱) 등이 사용됩니다.
    shift: 좌표 값의 정밀도. 기본값은 0입니다
    움직이는 line함수 그리기
                                                    ##2024. 5.7
    drawing
        -circle(원을 그리는 함수)
        매개변수 : img(그림그릴 이미지), center(원의 중심 위치를 나타내는 Point 객체), radius(반지름), color(색상을 나타내는 Scalar 객체)
        thickness(선의 두께), lineType(선의 유형), shift (좌표를 비트 단위로 우측 이동하는 값. 일반적으로는 0)
        -rectangle(직사각형을 그리는 함수)
        매개변수 : img(그림그릴 이미지), pt1(직사각형의 꼭지점 point를 자주사용), pt2(직사각형의 다른꼭지점 point를 자주사용), color(색)
        thickness(선의 두께), lineType(선의 유형), shift(좌표를 비트 단위로 우측 이동하는 값. 일반적으로는 0)
        -ellipse (타원을 그리는 함수)
        매개변수 : img(그림그릴 이미지), center(타원의 중심좌표 point), axes(타원의 축의 크기 (Size 객체)), angle(타원의 회전각도)
        startAngle(타원의 시작각도), endAngle(타원의 끝각도), color(색), thickness(선의 두께), lineType(선의 유형), shift(좌표를 비트 단위로 우측 이동하는 값. 일반적으로는 0)
    text
        putText(텍스트를 그리는 함수)
        매개변수 : img(그림그릴 이미지),, text(그릴 문자열), org(텍스트의 시작 좌표 (Point 객체)), fontFace(글꼴유형), fontScale(글꼴 크기 배율), color(색), thickness(선의 두께), lineType(선의 유형), bottomLeftOrigin(true이면 좌표계의 원점을 아래쪽 왼쪽으로 간주)
        freeStyle 한글 폰트 가능
    mouse
        setmousecallback(지정된 창에서 마우스 이벤트에 대한 콜백 함수를 설정)
        매개변수 : winname(마우스 이벤트를 처리할 창의 이름), onMouse(마우스 이벤트가 발생했을 때 호출할 콜백 함수), userdata(콜백 함수에 전달할 추가 데이터)
        마우스 콜백함수의 형태:typedef void (*MouseCallback)(int event, int x, int y, int flags, void* userdata);
        매개변수 : event(발생한 마우스 이벤트를 나타내는 상수 (예: EVENT_MOUSEMOVE, EVENT_LBUTTONDOWN)), x,y(마우스 이벤트가 발생한 좌표.)
        flags(마우스 이벤트에 대한 추가 정보 (예: EVENT_FLAG_LBUTTON은 왼쪽 버튼이 눌린 상태를 나타냄)), userdata()
    keyboard
        keyboard 입력받기
        cv2.waitKey():주로 이미지나 비디오를 표시할 때, 사용자로부터 키보드 입력을 수신하는 데 사용(매개변수 밀리초)
    tickMeter
        코드 실행 시간을 측정하는 데 사용되는 유틸리티
        매개변수 : start(): 타이머를 시작, stop(): 타이머를 중지, reset(): 타이머를 재설정, getTimeSec(): 측정된 시간을 초 단위로 반환
        getTimeMilli(): 측정된 시간을 밀리초 단위로 반환, getTimeMicro(): 측정된 시간을 마이크로초 단위로 반환
        etCounter(): start()와 stop() 사이의 타이머 카운터 횟수를 반환
        frame 일정하게 만들기 최적화 cv2.waitKey(), cv2.resize()등을 적절하게 사용

    trackbar :  OpenCV에서 GUI 요소 중 하나 주로 이미지 처리나 비디오 처리에서 실시간으로 매개변수를 조정할 때 사용
        trackbar Callback함수: 트랙바 콜백 함수는 트랙바의 값이 변경될 때 자동으로 호출되는 함수로써  트랙바를 사용하여 실시간으로 특정 작업을 수행할 수 있다. 예를 들어, 이미지의 밝기를 조정하거나, 이진화(thresholding) 수준을 변경하는 등의 작업을 수행.
        트랙바 생성: cv2.createTrackbar()를 사용하여 트랙바를 생성합니다. 이 때, 트랙바의 초기 값, 최소 값, 최대 값, 그리고 콜백 함수를 설정합니다.
        트랙바 콜백 함수 정의: 트랙바 값이 변경될 때 실행될 콜백 함수를 정의합니다. 이 함수는 트랙바의 새로운 값을 입력으로 받으며, 이 값을 사용하여 필요한 작업을 수행할 수 있습니다.
    4장 응용예제 만들기
        마우스 따라다니는 사각형 + BGR 정보 얻기 + 파일 저장
    영상 밝기 조절
        saturated cast : 일반적으로 데이터 타입 변환을 수행할 때 오버플로우와 언더플로우를 방지하는 기술
        cv2.convertScaleAbs를 사용하여 밝기 조절 : 함수는 주로 이미지의 픽셀 값에 스케일링과 오프셋을 적용하여 밝기와 대비를 조정
        변수 : alpha(스케일링 인자) <- 대비 , beta(오프셋 인자) <-밝기
        픽셀 값에 일정 값을 더하여 밝기 조절
        밝기를 직접적으로 조절하려면 이미지의 각 픽셀 값에 일정한 값을 더하거나 빼는 방법 cv2.add() 함수를 사용

                                                ## 2024 5.8
    
    영상 밝기 조절
    트랙바를 적용하여 조절가능

    영상 대비 조절 :상에서 어두운 부분과 밝은 부분의 차이를 조절한다.
    단순 곱하기 
    cv2.multiply()를 사용하거나 numpy 연산을 통해 직접 곱셈을 수행
    중간 영역 확장
    히스토그램 스트래칭 : 이미지의 최솟값과 최댓값을 찾고, 그 범위에 따라 픽셀 값을 재조정
    히스토그램 평활화 :이미지의 밝기 분포를 고르게 만들면서 대비를 향상시키는 방법
    전체적인 이미지 대비를 확장하는 데 유용, 그러나 노이즈를 증가시키거나 지나치게 인위적인 효과발생 우려

    영상의 산술 연산
    add :두 이미지의 픽셀 값 또는 이미지와 스칼라의 합을 계산. 결과 값이 255를 넘지 않도록 자동으로 클리핑(포화 연산)이 적용
    addWeighted :  두 이미지의 가중치(weight)를 조절하여 이미지를 합성
    subtract :두 이미지의 픽셀 값 또는 이미지와 스칼라의 차를 계산. 결과 값이 음수가 되지 않도록 자동으로 클리핑이 적용
    absdiff :두 이미지의 절대 차이를 계산. 이 함수는 두 이미지의 픽셀 값 간의 절대적인 차이를 계산하므로, 이미지 비교나 변화 감지에 유용

    비트연산 : 이미지 처리에서 강력한 도구로, 이미지의 특정 부분을 마스킹하거나 특정 효과를 적용
    bitwise_and : 두 이미지 간의 비트 단위 AND 연산을 수행  두 이미지 모두에서 비트가 1인 경우에만 결과가 1이 되고
    마스킹 작업이나 특정 부분을 강조하는 데 사용
    bitwise_or : 두 이미지 간의 비트 단위 OR 연산을 수행 각 픽셀의 값은 OR 연산 결과로 얻어지며, 두 이미지 중 하나에서라도 비트가 1인 경우 결과가 1이 되고 이 기능은 이미지 합성이나 두 이미지를 결합할 때 사용
    bitwise_nor :  두 이미지 간의 비트 단위 XOR 연산을 수행, 두 이미지가 서로 다른 부분에서 비트를 강조하고, 결과는 두 이미지가 다른 부분을 표시할 때 유용합니다.
    bitwise_not : 이미지의 각 픽셀에 대해 비트 단위 NOT 연산을 수행, NOT 연산은 비트의 반전(1을 0으로, 0을 1로)으로, 이미지의 반전 효과를 만드는 데 사용

    covolution
    기본 개념 : 컨볼루션은 입력 이미지에 커널(kernel)을 적용하여 출력을 생성하는 과정입니다. 커널은 작은 행렬로, 이미지의 특정 부분에 특정 연산을 적용할 때 사용
    가장자리 연산 : 미지의 경계(에지, edge)를 강조하거나 추출하는 기술을 의미. 에지(Edge)는 이미지에서 밝기나 색상의 급격한 변화를 나타내며, 주로 객체의 경계, 선, 윤곽 등을 표시. 
    filter2D ; cv2.filter2D()는 입력 이미지에 주어진 커널을 적용하는 가장 일반적인 컨볼루션 함수
    블러링 : 컨볼루션을 사용하여 이미지에 부드러운 효과를 주는 작업
    blurring
    GaussianBlurring : 주어진 커널 크기에 따라 각 픽셀에 대해 가우시안 가중치를 적용하여 이미지를 부드럽게 가공. 가우시안 블러는 노이즈를 제거하거나 이미지의 부드러운 전환을 위해 자주 사용, cv2.GaussianBlur()함수를 쓰며 매개변수엔 ksize, sigma가 있다.각각 커널크기(홀수만가능),
    블러링 효과정도에 관여한다.
    MedianBlurring : 커널 내의 픽셀 값을 정렬하여 중앙값을 선택하는 기법. 이 방법은 소금과 후추 노이즈(salt-and-pepper noise)를 제거하는 데 효과적, 각 픽셀에 대해 주변 픽셀의 중앙값을 선택하므로, 급격한 변화를 부드럽게 가공 cv2.medianBlur()함수를 쓰며 매개변수엔 ksize(커널크기)가 있다.
    bilateralFiltering : 블러링과 에지 보존을 동시에 수행하는 기법, 이미지에서 세부 사항을 유지하면서 노이즈를 줄일 때 유용, cv2.bilateralFilter()함수를 사용하며 매개변수엔 d,sigmaColor,sigmaSpace가 있으며 각각 필터의 직경, 색상 표준 편차(원본과 유사한정도), 색상 표준 편차(가까운정도)를 의미한다.

    샤프닝 : 이미지의 선명도와 디테일을 높이는 이미지 처리 기법, 이미지의 고주파 성분을 강화하여 에지를 강조하는 것
    커널을 사용한 컨볼루션, 언샤프 마스킹(Unsharp Masking), Laplacian을 통한 샤프닝 등이 그 방법이다. 그중에서 커널을 사용한 컨볼루션을 이용한 코드를 제작

    커널을 사용한 컨볼루션 : 커널을 사용하여 픽셀 값의 변화를 강조하고, 주변 픽셀과의 차이를 증가

    노이즈생성 
    가우시안 노이즈 : 가우시안 분포를 따르는 노이즈로, 주로 이미지의 모든 픽셀에 랜덤 값이 더해져 발생
    소금-후추 노이즈 : 이미지의 픽셀 중 일부가 최솟값(검은색) 또는 최댓값(흰색)으로 변하는 노이즈
    미디안 필터 :이 기법은 이미지의 각 픽셀을 주변 픽셀의 중앙값으로 대체하는 방식으로, 노이즈 제거나 블러링(흐리게 하기) 효과를 제공
    cv2.medianBlur()함수를 사용하며 매개변수는 바꿀이미지(image), 커널의 크기(int형)이 있다.
    
    기하학적인 변환
    기본개념 : 이미지의 위치, 크기, 형태 등을 변경하는 작업
    어파인 변환 (Affine Transformation) : 직선이 직선으로 유지되며 평행성이 유지되는 기하학적 변환
    이동변환 : 이미지의 모든 픽셀을 일정 방향으로 이동시키는 변환
    전단변환 : 이미지의 축을 기준으로 비스듬하게 변형하는 기하학적 변환 
    회전변환 : 이미지를 중심점 기준으로 회전시키는 변환
    크기변환 : 이미지의 크기를 변경하는 변환
    투시변환 : 이미지 내의 특정 영역을 다른 모양이나 크기의 사각형으로 변환하는 기술
    (cv2.getPerspectiveTransform(src_points, dst_points))함수로 변환된 매트릭스를 계산하며 v2.warpPerspective(image, M, output_size)
    함수로 계산된 매트릭스를 이미지로 출력한다.
    warpAffine, warpPerspective, getRotationMatrix2D, getAffineTransform 함수를 적절히 사용하여 코드 작성
    
    미분 필터 : 이미지 처리 및 컴퓨터 비전에서 픽셀 값의 변화율을 계산하여 이미지의 에지를 검출하거나 경계를 강조하는 데 사용. 미분 필터는 이미지에서 밝기나 색상 변화의 기울기를 계산하여, 에지나 변화가 급격한 부분을 추출가능.

    캐니엣지 : 노이즈 감소, 에지 검출, 에지 연결 등의 복잡한 단계를 거쳐 에지를 추출. 이를 통해 명확하고 선명한 에지를 얻을 수 있다.
    cv2.Canny() 함수를 사용하며 매개변수는 바꿀이미지(image), 임계 최소값(int형), 임계 최대값(int형)이 있다.
    소벨마스크엣지 : 이미지의 수평 또는 수직 방향으로 기울기를 계산하여 에지를 검출하는 방법 cv2.Sobel()함수를 사용하며
    매개변수는 바꿀이미지(image), 매트릭스타입, x축 혹은 y축의 기준좌표(보통은 0), x축 혹은 y축의 엣지체크할 좌표(보통은 1), ksize가 있다.

                                                # 2024.5.9
    
    직선검출과 원 검출

    허프변환 직선 검출
    허프변환 : 이미지 내의 특정 모양을 감지하는 데 사용되는 기술 주로 직선과 원을 감지하는데 사용한다.이미지에서 에지(모서리)를 탐지한 다음, 그 에지를 기반으로 특정 패턴을 추출, 허프 공간(Hough Space)을 생성하여 가능한 패턴을 표현하고, 가장 많이 등장하는 패턴을 검출해낸다.
    1. 에지 감지 : 캐니 엣지 사용
    2. 허프 공간 생성 : 허프 변환에서는 직선을 극 좌표계(극좌표 형식)로 변환합니다. 극 좌표계에서 직선은 특정 각도(θ)와 거리를 통해 정의
    3. 허프 공간에서 직선 찾기 : cv2.HoughLines 또는 cv2.HoughLinesP 함수를 사용하여 에지 기반 허프 공간에서 직선을 검색, 각도와 거리의 조합을 기반으로 허프 공간을 탐색
    4. 찾은 직선을 이미지에 표시 : 원래 이미지에 표시한다.
    확률적 허프변환 : 직선의 시작점과 끝점 좌표를 반환하며 cv2.HoughLinesP함수를 사용하여 매개변수는 o,age ines rho theta threshold minLineLength maxLineGap이 있다.

    허프변환 원 검출
    직선 검출과 다른점은 에지를 감지할필요가 없고 대신 노이즈처리를 해줘야 제대로 된 결과가 나온다
    함수는 cv2.HoughCircles을 사용하며 매개변수엔 image, method(일반적으로 cv2.HOUGH_GRADIENT를 사용), dp(허프 공간의 해상도조절), minDist(감지된 원 간의 최소 거리), param1(상한 임계값), param2(허프 변환의 임계값), minRadius(감지할 원의 최소 반지름), maxRadius(감지할 원의 최대 반지름)

    컬러 영상 처리
    컬러영상의 픽셀값 반전

    컬러영상의 색 공간 변환

    컬러영상의 색상 채널 나누기

    컬러 영상 처리 기법
    히스토그램 평활화
    색상 범위 지정에 의한 영역 분할
    히스토그램 역투영

    이진화

    적응형 이진화

    모폴로지 연산

    레이블링

    외곽선 검출
    


